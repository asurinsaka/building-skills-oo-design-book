
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Blackjack Game Class &#8212; Building Skills in Object-Oriented Design 4.1910 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Simple Blackjack Player Class" href="simple_blackjack_player.html" />
    <link rel="prev" title="Blackjack Table Class" href="blackjack_table.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="blackjack-game-class">
<span id="blackjack-game"></span><h1>Blackjack Game Class<a class="headerlink" href="#blackjack-game-class" title="Permalink to this headline">¶</a></h1>
<p>The game offers a large number of decisions to a player.
This is different from Roulette, where the player’s choices are limited to
a list of bets to place.</p>
<p>In <a class="reference internal" href="#blackjack-game-analysis">Blackjack Game Analysis</a> we’ll look at the game and how the
state of play is going to be managed.</p>
<p>In <a class="reference internal" href="#blackjack-collaboration">Blackjack Collaboration</a> we’ll look at the various player interactions.
In <a class="reference internal" href="#insurance-collaboration">Insurance Collaboration</a> we’ll look at the insurance bet.
In <a class="reference internal" href="#filling-the-hands">Filling the Hands</a> we’ll look at the hit vs. stand decision.
There are some additional decisions – like splitting – which require
more interaction. We’ll look at this in <a class="reference internal" href="#hand-specific-decisions">Hand-Specific Decisions</a>.</p>
<p>We’d like to segregate dealer rules from the rest of the game.
This allows us to alter how a dealer fills their hand without breaking
anything else. We’ll look at this in <a class="reference internal" href="#dealer-rules">Dealer Rules</a>.</p>
<p>This will require a stub class for a Blackjack Player.
We’ll look at this design in <a class="reference internal" href="#blackjackplayer-class">BlackjackPlayer Class</a>.</p>
<p>We’ll tweak the design for <a class="reference internal" href="card_deck_shoe.html#Card" title="Card"><code class="xref py py-class docutils literal notranslate"><span class="pre">Card</span></code></a> in order to determine
if insurance should be offered. This covered in <a class="reference internal" href="#card-rework">Card Rework</a>.</p>
<p>We’ll also revisit the fundamental
relationship between Game, Hand and Player. We’ll invert our viewpoint
from the Player containing a number of Hands to the Hands sharing a
common Player. This is the subject of <a class="reference internal" href="#hand-rework">Hand Rework</a>.</p>
<p>We’ll provide the design for the game in <a class="reference internal" href="#blackjackgame-class">BlackjackGame Class</a>.
In <a class="reference internal" href="#blackjack-game-deliverables">Blackjack Game Deliverables</a> we’ll enumerate all of the deliverables.</p>
<div class="section" id="blackjack-game-analysis">
<h2>Blackjack Game Analysis<a class="headerlink" href="#blackjack-game-analysis" title="Permalink to this headline">¶</a></h2>
<p>The sequence of operations in the game of Blackjack is quite complex. We
can describe the game in either of two modes: as a sequential procedure
or as a series of state changes.</p>
<ul class="simple">
<li><p>A sequential description means that the state is identified by the step that is next in the sequence.</p></li>
<li><p>The state change description involves a stream of events that change the sateof the game.
We used this type of approach to describe Craps, see <a class="reference internal" href="../craps/details.html#craps-details-game-rules"><span class="std std-ref">Craps Game Overview</span></a>.</p></li>
</ul>
<p>Additionally, we need to look at the various collaborations  of the Game.
We also need to address the question of handling the dealer’s rules.</p>
<p><strong>Maintaining State</strong>.
The sequential description of state, where the current state is defined
by the step that is next, is the default description of state in many
programming languages. While it seems obvious beyond repeating, it is
important to note that each statement in a method changes the state of
the application; either by changing state of the object that contains
the method, or invoking methods of other, collaborating objects. In the case
of an <em>active</em> class, this description of state as next statement is
adequate. In the case of a <em>passive</em> class, this description of state
doesn’t work out well because passive classes have their state changed
by collaborating objects. For passive objects, instance variables and state
objects are a useful way to track state changes.</p>
<p>In the case of Roulette, the cycle of betting and the game procedure
were a simple sequence of actions. In the case of Craps, however, the
game was only loosely tied to each the cycle of betting and throwing the
dice. For Craps, the game state a passive part of the cycle of play. In the
case of Blackjack, the cycle of betting and game procedure seem more like Roulette.</p>
<p>Most of a game of Blackjack is sequential in nature: the initial
offers of even money, insurance and splitting the hands are optional
steps that happen in a defined order. When filling the player’s <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances,
there are some minor sub-states and state changes. When all
of the player’s <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances are bust or standing pat, the dealer
fills their hand.  Finally,  the hands are  resolved with no more player
intervention.  There is a sequence to these steps that doesn’t seem
to benefit from the :strong:<strong>State</strong> design pattern.</p>
<p>Most of the game appears to be a sequence of offers from the
<a class="reference internal" href="../roulette/roulette_game.html#Game" title="Game"><code class="xref py py-class docutils literal notranslate"><span class="pre">Game</span></code></a> instance to the <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> instance; these are offers
to place bets, or accept cards, or a combination of the two, for each of
the player’s <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances.</p>
</div>
<div class="section" id="blackjack-collaboration">
<h2>Blackjack Collaboration<a class="headerlink" href="#blackjack-collaboration" title="Permalink to this headline">¶</a></h2>
<p>In Craps and Roulette, the <a class="reference internal" href="../roulette/player.html#Player" title="Player"><code class="xref py py-class docutils literal notranslate"><span class="pre">Player</span></code></a> object was the primary
collaborator with the game. In Blackjack, however, focus shifts from the <a class="reference internal" href="../roulette/player.html#Player" title="Player"><code class="xref py py-class docutils literal notranslate"><span class="pre">Player</span></code></a> intance
to the individual <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> objects. This changes the responsibilities of a <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a>:
the <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> object can delegate certain offers to the <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> instance
for a response. The <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> object become a plug-in
strategy to the <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances, providing responses to offers of
insurance, even money, splitting, doubling-down, hitting and standing
pat. The <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> object’s response will change the states
of the the various <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances in play. Some state changes involve getting a card,
and others involve placing a bet, and some involve a combination of the two.</p>
<p>Most of the time, there is a one-to-one relationship between the <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> instance
and the <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instance in play. This changes where there is a split
and multiple <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances are shared by a single <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> instance.</p>
<p>We’ll use the procedure definition in <a class="reference internal" href="solution.html#blackjack-solution-proc"><span class="std std-ref">A Walkthrough</span></a>.
Following this procedure, we see the following methods that a <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> object
and a <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> object will need to respond to. These are the various
offers from the <a class="reference internal" href="#BlackjackGame" title="BlackjackGame"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackGame</span></code></a> class. The first portion of the
game involves the <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> object responding, the second portion
invovles one or more <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances responding.</p>
<p>The collaboration is so intensive, it seems helpful to depict it in a swimlane table.
This table shows the operations each object must perform.
This will allow us to expand on the responsibiltiies of the <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>
and <a class="reference internal" href="blackjack_table.html#BlackjackTable" title="BlackjackTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackTable</span></code></a> clases as well as define the interface for <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> class.</p>
<table class="docutils align-default" id="id6">
<caption><span class="caption-text">Blackjack Overall Collaboration</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>BlackjackGame class</p></th>
<th class="head"><p>Hand class</p></th>
<th class="head"><p>BlackjackPlayer class</p></th>
<th class="head"><p>BlackjackTable class</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>calls BlackjackPlayer placeBet</p></td>
<td></td>
<td><p>creates empty Hand, creates initial Ante Bet</p></td>
<td><p>accepts the ante bet, associates with the Hand</p></td>
</tr>
<tr class="row-odd"><td><p>gets the initial Hand; deal 2 cards to Hand</p></td>
<td><p>add cards</p></td>
<td><p>returns the initial Hand</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>deal 2 cards to dealer’s Hand</p></td>
<td><p>add cards</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>gets up card from dealer’s Hand; if this card requires insurance, do the insurance procedure</p></td>
<td><p>return up card</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>iterate through all Hand instances; is the given Hand splittable?</p></td>
<td><p>return true if two cards of the same rank</p></td>
<td><p>returns a list iterator</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>if the Hand is splittable, offer a split bet</p></td>
<td><p>get the BlackjackPlayer response; return it to the game</p></td>
<td><p>to split: create a split bet, and an empty Hand; return the new Hand</p></td>
<td><p>accept the split bet for the new Hand</p></td>
</tr>
<tr class="row-even"><td><p>if splitting, move card and deal cards; continue looking for split offers</p></td>
<td><p>take a card out; add a card</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>iterate through all Hand; if the Hand is less than 21, do the fill-hand procedure</p></td>
<td></td>
<td><p>returns a list iterator</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>while the dealer’s point value is 16 or less, deal another card</p></td>
<td><p>return point value of the Hand; add a card</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>if the dealer busts, iterate through all Hand instances resolving the ante as a winner</p></td>
<td><p>return point value of the Hand</p></td>
<td><p>returns a list iterator</p></td>
<td><p>resolve bet as winner and remove</p></td>
</tr>
<tr class="row-even"><td><p>if the dealer does not bust, iterate through all Hand instances comparing against the dealer’s points, determining win, loss or push</p></td>
<td><p>return point value of the hand</p></td>
<td><p>returns a list iterator</p></td>
<td><p>resolve bet and remove</p></td>
</tr>
</tbody>
</table>
<p>There are a few common variation in this procedure for play. We’ll set
them aside for now, but will visit them in <a class="reference internal" href="variant_game.html#blackjack-var"><span class="std std-ref">Variant Game Rules</span></a>.</p>
<div class="section" id="insurance-collaboration">
<h3>Insurance Collaboration<a class="headerlink" href="#insurance-collaboration" title="Permalink to this headline">¶</a></h3>
<p>The insurance procedure involves additional interaction between <a class="reference internal" href="../roulette/roulette_game.html#Game" title="Game"><code class="xref py py-class docutils literal notranslate"><span class="pre">Game</span></code></a>
and the the <a class="reference internal" href="../roulette/player.html#Player" title="Player"><code class="xref py py-class docutils literal notranslate"><span class="pre">Player</span></code></a>’s initial <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>. The
following is done only if the dealer is showing an ace.</p>
<table class="docutils align-default" id="id7">
<caption><span class="caption-text">Blackjack Insurance Collaboration</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>BlackjackGame class</p></th>
<th class="head"><p>Hand class</p></th>
<th class="head"><p>BlackjackPlayer class</p></th>
<th class="head"><p>BlackjackTable class</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>if BlackjackPlayer Hand imstamce is blackjack: offer even money</p></td>
<td><p>return true if 2 cards, soft 21</p></td>
<td><p>to accept, return true</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>if BlackjackPlayer accepted even money offer: change bet, resolve; end of game</p></td>
<td></td>
<td></td>
<td><p>update bet; resolve and remove bet</p></td>
</tr>
<tr class="row-even"><td><p>offer insurance</p></td>
<td></td>
<td><p>to accept, create new bet; return true</p></td>
<td><p>accept insurance bet</p></td>
</tr>
<tr class="row-odd"><td><p>if BlackjackPlayer accepted insurance offer: check dealer’s hand; if blackjack, insurance wins, ante loses, game over; otherwise insurance loses</p></td>
<td><p>return point value</p></td>
<td></td>
<td><p>resolve and remove bet</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="filling-the-hands">
<h3>Filling the Hands<a class="headerlink" href="#filling-the-hands" title="Permalink to this headline">¶</a></h3>
<p>The procedure for filling each <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> involves additional
interaction between <a class="reference internal" href="../roulette/roulette_game.html#Game" title="Game"><code class="xref py py-class docutils literal notranslate"><span class="pre">Game</span></code></a> and the the <a class="reference internal" href="../roulette/player.html#Player" title="Player"><code class="xref py py-class docutils literal notranslate"><span class="pre">Player</span></code></a>’s initial
<a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>. An <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code> used for perform the
following procedure for each individual player <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>.</p>
<table class="docutils align-default" id="id8">
<caption><span class="caption-text">Blackjack Fill-Hand Collaboration</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>BlackjackGame class</p></th>
<th class="head"><p>Hand class</p></th>
<th class="head"><p>BlackjackPlayer class</p></th>
<th class="head"><p>BlackjackTable class</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>if BlackjackPlayer’s Hand instance is blackjack: resolve ante bet</p></td>
<td><p>return true if 2 cards, soft 21</p></td>
<td></td>
<td><p>resolve and remove bet</p></td>
</tr>
<tr class="row-odd"><td><p>while points less than 21, offer play options of double or hit; rejecting both offers is a stand.</p></td>
<td><p>return point value; pass offers to player</p></td>
<td><p>to double, increase the bet for this hand and return true; to hit, return true</p></td>
<td><p>update bet</p></td>
</tr>
<tr class="row-even"><td><p>if over 21, the hand is a bust</p></td>
<td><p>return point value</p></td>
<td></td>
<td><p>resolve the ante as a loss</p></td>
</tr>
</tbody>
</table>
<p>There is some variation in this procedure for filling <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances.
The most common variation only allows a double-down when the <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>
has two cards.</p>
</div>
<div class="section" id="hand-specific-decisions">
<h3>Hand-Specific Decisions<a class="headerlink" href="#hand-specific-decisions" title="Permalink to this headline">¶</a></h3>
<p>Some of the offers are directly to the <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> instance,
while others require informing the <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> object which of the
player’s <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances is being referenced.</p>
<p>How do we identify a specific hand?</p>
<ul class="simple">
<li><p>One choice is to have the <a class="reference internal" href="#BlackjackGame" title="BlackjackGame"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackGame</span></code></a> object
make the offer to the <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> object.  The <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instance
can pass the offer to the <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> object; the <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>
includes a reference to itself.</p></li>
<li><p>An alternative is to have the <a class="reference internal" href="#BlackjackGame" title="BlackjackGame"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackGame</span></code></a> object
make the offer directly to the <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> object, including
a reference to the relevant <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instance.</p></li>
</ul>
<p>While the difference is
minor, it seems slightly more sensible for the <a class="reference internal" href="#BlackjackGame" title="BlackjackGame"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackGame</span></code></a> object
to make offers directly to the <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> object, including
a reference to the relevant <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instance.</p>
</div>
</div>
<div class="section" id="dealer-rules">
<h2>Dealer Rules<a class="headerlink" href="#dealer-rules" title="Permalink to this headline">¶</a></h2>
<p>In a sense, the dealer can be viewed as a special player.  They have a fixed set
of rules for hitting and standing.  They are not actually offered
an insurance bet, nor can they split or double down.</p>
<p>However, the dealer does participate in the hand-filling phase
of the game, deciding to hit or stand pat.</p>
<p>The dealer’s rules are quite simple.  Should the Dealer be a
special subclass of the <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> class; one that implements
only the dealer’s rules?</p>
<p>Or, should the Dealer be a feature of the :class:BlackjackGame` class?  In this case, the
Game would maintain the dealer’s Hand and execute the card-filling
algorithm.</p>
<p>Using an subclass of the <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> class is an example
of <strong>Very Large Hammer</strong> design pattern.  We only want a few
features of the <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> class, why drive a small nail
with a huge hammer?</p>
<p><strong>Refactoring</strong>.
To avoid over-engineering these classes, we could refactor the <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> class into
two components.  One component is an object that handles hand-filling, and the other component
is an object that handles betting strategies.</p>
<p>The dealer would only use the hand-filling component of a player.</p>
<p><strong>Mutability</strong>.
We can look at features that are likely to change.  The dealer hand-filling rules seem well-established
throughout the industry.</p>
<p>Further, a change to the hand-filling rules of the dealer would
change the nature of the game enough that we would be hard-pressed
to call in Blackjack.  A different hand-filling rule would constitute
a new kind of game.</p>
<p>We’re confident, then, that the dealer’s hand can be a feature of the
<a class="reference internal" href="#BlackjackGame" title="BlackjackGame"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackGame</span></code></a> class.</p>
</div>
<div class="section" id="blackjackplayer-class">
<h2>BlackjackPlayer Class<a class="headerlink" href="#blackjackplayer-class" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="BlackjackPlayer">
<em class="property">class </em><code class="sig-name descname">BlackjackPlayer</code><a class="headerlink" href="#BlackjackPlayer" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> class is a subclass of <a class="reference internal" href="../roulette/player.html#Player" title="Player"><code class="xref py py-class docutils literal notranslate"><span class="pre">Player</span></code></a> that
responds to the various queries and interactions with the game of Blackjack.</p>
</dd></dl>

<div class="section" id="fields">
<h3>Fields<a class="headerlink" href="#fields" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="BlackjackPlayer.hand">
<code class="sig-prename descclassname">BlackjackPlayer.</code><code class="sig-name descname">hand</code><a class="headerlink" href="#BlackjackPlayer.hand" title="Permalink to this definition">¶</a></dt>
<dd><p>Some kind of <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code> which contains the initial <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> and any split hands
that may be created.</p>
</dd></dl>

</div>
<div class="section" id="constructors">
<h3>Constructors<a class="headerlink" href="#constructors" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="BlackjackPlayer.__init__">
<code class="sig-prename descclassname">BlackjackPlayer.</code><code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">table: Table</em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#BlackjackPlayer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>table</strong> (<a class="reference internal" href="blackjack_table.html#BlackjackTable" title="BlackjackTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackTable</span></code></a>) – The table on which bets are placed</p>
</dd>
</dl>
<p>Uses the superclass to construct a basic <a class="reference internal" href="../roulette/player.html#Player" title="Player"><code class="xref py py-class docutils literal notranslate"><span class="pre">Player</span></code></a>. Uses the
<a class="reference internal" href="#BlackjackPlayer.newGame" title="BlackjackPlayer.newGame"><code class="xref py py-meth docutils literal notranslate"><span class="pre">newGame()</span></code></a> to create an empty List fot the hands.</p>
</dd></dl>

</div>
<div class="section" id="methods">
<h3>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="BlackjackPlayer.newGame">
<code class="sig-prename descclassname">BlackjackPlayer.</code><code class="sig-name descname">newGame</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#BlackjackPlayer.newGame" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new, empty list in which to keep <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances.</p>
</dd></dl>

<dl class="method">
<dt id="BlackjackPlayer.placeBets">
<code class="sig-prename descclassname">BlackjackPlayer.</code><code class="sig-name descname">placeBets</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#BlackjackPlayer.placeBets" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an empty <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>
and adds it to the List of <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances.</p>
<p>Creates a new ante Bet. Updates the <a class="reference internal" href="../roulette/roulette_table.html#Table" title="Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> with this <a class="reference internal" href="../roulette/bet.html#Bet" title="Bet"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bet</span></code></a> on
the initial <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="BlackjackPlayer.getFirstHand">
<code class="sig-prename descclassname">BlackjackPlayer.</code><code class="sig-name descname">getFirstHand</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#BlackjackPlayer.getFirstHand" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the initial <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>. This is used by the
pre-split parts of the Blackjack game, where the player only has a single
<a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="BlackjackPlayer.__iter__">
<code class="sig-prename descclassname">BlackjackPlayer.</code><code class="sig-name descname">__iter__</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span> &#x2192; Iterator[Hand]<a class="headerlink" href="#BlackjackPlayer.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator over the List of <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances this
player is currently holding.</p>
</dd></dl>

<dl class="method">
<dt id="BlackjackPlayer.evenMoney">
<code class="sig-prename descclassname">BlackjackPlayer.</code><code class="sig-name descname">evenMoney</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">hand: Hand</em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#BlackjackPlayer.evenMoney" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hand</strong> (<a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>) – the hand which is offered even money</p>
</dd>
</dl>
<p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if this Player accepts the even money offer.
The superclass always rejects this offer.</p>
</dd></dl>

<dl class="method">
<dt id="BlackjackPlayer.insurance">
<code class="sig-prename descclassname">BlackjackPlayer.</code><code class="sig-name descname">insurance</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">hand: Hand</em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#BlackjackPlayer.insurance" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hand</strong> (<a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>) – the hand which is offered insurance</p>
</dd>
</dl>
<p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if this Player accepts the insurance offer.
In addition to returning true, the Player must also create the Insurance
<a class="reference internal" href="../roulette/bet.html#Bet" title="Bet"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bet</span></code></a> and place it on the <a class="reference internal" href="blackjack_table.html#BlackjackTable" title="BlackjackTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackTable</span></code></a>.
The superclass always rejects this offer.</p>
</dd></dl>

<dl class="method">
<dt id="BlackjackPlayer.split">
<code class="sig-prename descclassname">BlackjackPlayer.</code><code class="sig-name descname">split</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">hand: Hand</em><span class="sig-paren">)</span> &#x2192; Hand<a class="headerlink" href="#BlackjackPlayer.split" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hand</strong> (<a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>) – the hand which is offered an opportunity to split</p>
</dd>
</dl>
<p>If the hand has two cards of the same rank, it can be split.
Different players will have different rules for determine
if the hand should be split ot not.</p>
<p>If the player’s rules determine that it wil accepting the split offer for the given <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>, <a class="reference internal" href="#BlackjackPlayer.hand" title="BlackjackPlayer.hand"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hand</span></code></a>,
then the
player will</p>
<ol class="arabic simple">
<li><p>Create a new Ante bet for this hand.</p></li>
<li><p>Create a new one-card <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> from the given <a class="reference internal" href="#BlackjackPlayer.hand" title="BlackjackPlayer.hand"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hand</span></code></a> and return that new hand.</p></li>
</ol>
<p>If the player’s rules determine that it will not accept the split offer, then <code class="docutils literal notranslate"><span class="pre">None</span></code>
is returned.</p>
<p>If the hand is split, adding cards to each of the resulting hands is the responsibility
of the Game.  Each hand will be played out independently.</p>
</dd></dl>

<dl class="method">
<dt id="BlackjackPlayer.doubleDown">
<code class="sig-prename descclassname">BlackjackPlayer.</code><code class="sig-name descname">doubleDown</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">hand: Hand</em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#BlackjackPlayer.doubleDown" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hand</strong> (<a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>) – the hand which is offered an opportunity to double down</p>
</dd>
</dl>
<p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code>
if this Player accepts the double offer for this <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>.
The Player must also update the <a class="reference internal" href="../roulette/bet.html#Bet" title="Bet"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bet</span></code></a> associated with this
<a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>. This superclass always rejects this offer.</p>
</dd></dl>

<dl class="method">
<dt id="BlackjackPlayer.hit">
<code class="sig-prename descclassname">BlackjackPlayer.</code><code class="sig-name descname">hit</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">hand</em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#BlackjackPlayer.hit" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hand</strong> (<a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>) – the hand which is offered an opportunity to hit</p>
</dd>
</dl>
<p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code>
if this Player accepts the hit offer for this <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>.
The superclass accepts this offer if the hand is 16 or less, and
rejects this offer if the hand is 17 more more. This mimics the
dealer’s rules.</p>
<p>Failing to hit and failing to double down means the player is
standing pat.</p>
</dd></dl>

<dl class="method">
<dt id="BlackjackPlayer.__str__">
<code class="sig-prename descclassname">BlackjackPlayer.</code><code class="sig-name descname">__str__</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#BlackjackPlayer.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays the current state of the player, and the various hands.</p>
</dd></dl>

</div>
</div>
<div class="section" id="card-rework">
<h2>Card Rework<a class="headerlink" href="#card-rework" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="card_deck_shoe.html#Card" title="Card"><code class="xref py py-class docutils literal notranslate"><span class="pre">Card</span></code></a> class must provide the :class:BlackjackGame` class some information required to
offer insurance bets.</p>
<p>We’ll need to add an <code class="xref py py-meth docutils literal notranslate"><span class="pre">offerInsurance()</span></code> method on the <a class="reference internal" href="card_deck_shoe.html#Card" title="Card"><code class="xref py py-class docutils literal notranslate"><span class="pre">Card</span></code></a> class.
The <a class="reference internal" href="card_deck_shoe.html#Card" title="Card"><code class="xref py py-class docutils literal notranslate"><span class="pre">Card</span></code></a> superclass must respond with <code class="docutils literal notranslate"><span class="pre">False</span></code>.  This means that
the <a class="reference internal" href="card_deck_shoe.html#FaceCard" title="FaceCard"><code class="xref py py-class docutils literal notranslate"><span class="pre">FaceCard</span></code></a> subclass can inherit this and also respond with <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>The <a class="reference internal" href="card_deck_shoe.html#AceCard" title="AceCard"><code class="xref py py-class docutils literal notranslate"><span class="pre">AceCard</span></code></a> subclass, however, must respond with <code class="docutils literal notranslate"><span class="pre">True</span></code> to
this method.</p>
</div>
<div class="section" id="hand-rework">
<h2>Hand Rework<a class="headerlink" href="#hand-rework" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> class should retain some additional hand-specific information.
Since some games allow resplitting of split hands, it’s helpful to
record whether or not a player has declined or accepted the offer of a split.</p>
<div class="section" id="id1">
<h3>Fields<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="Hand.player">
<code class="sig-prename descclassname">Hand.</code><code class="sig-name descname">player</code><a class="headerlink" href="#Hand.player" title="Permalink to this definition">¶</a></dt>
<dd><p>Holds a reference to the <a class="reference internal" href="../roulette/player.html#Player" title="Player"><code class="xref py py-class docutils literal notranslate"><span class="pre">Player</span></code></a> who owns this hand.
Each of the various offers from the <a class="reference internal" href="../roulette/roulette_game.html#Game" title="Game"><code class="xref py py-class docutils literal notranslate"><span class="pre">Game</span></code></a> are delegated
to the <a class="reference internal" href="../roulette/player.html#Player" title="Player"><code class="xref py py-class docutils literal notranslate"><span class="pre">Player</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="Hand.splitDeclined">
<code class="sig-prename descclassname">Hand.</code><code class="sig-name descname">splitDeclined</code><a class="headerlink" href="#Hand.splitDeclined" title="Permalink to this definition">¶</a></dt>
<dd><p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> if split was declined for a splittable hand.
Also set to <code class="docutils literal notranslate"><span class="pre">True</span></code> if the hand is not splittable. The split
procedure will be done when all hands return <code class="docutils literal notranslate"><span class="pre">True</span></code> for
split declined.</p>
</dd></dl>

</div>
<div class="section" id="id2">
<h3>Methods<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="Hand.splittable">
<code class="sig-prename descclassname">Hand.</code><code class="sig-name descname">splittable</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#Hand.splittable" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if this hand has a size of two and both <a class="reference internal" href="card_deck_shoe.html#Card" title="Card"><code class="xref py py-class docutils literal notranslate"><span class="pre">Card</span></code></a> instances
have the same rank. Also sets <a class="reference internal" href="#Hand.splitDeclined" title="Hand.splitDeclined"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Hand.splitDeclined</span></code></a> to <code class="docutils literal notranslate"><span class="pre">True</span></code> if
the hand is not splittable.</p>
</dd></dl>

<dl class="method">
<dt id="Hand.getUpCard">
<code class="sig-prename descclassname">Hand.</code><code class="sig-name descname">getUpCard</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span> &#x2192; Card<a class="headerlink" href="#Hand.getUpCard" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the first <a class="reference internal" href="card_deck_shoe.html#Card" title="Card"><code class="xref py py-class docutils literal notranslate"><span class="pre">Card</span></code></a> from the list of cards, the up card.</p>
</dd></dl>

</div>
</div>
<div class="section" id="blackjackgame-class">
<h2>BlackjackGame Class<a class="headerlink" href="#blackjackgame-class" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="BlackjackGame">
<em class="property">class </em><code class="sig-name descname">BlackjackGame</code><a class="headerlink" href="#BlackjackGame" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#BlackjackGame" title="BlackjackGame"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackGame</span></code></a> is a subclass of <a class="reference internal" href="../roulette/roulette_game.html#Game" title="Game"><code class="xref py py-class docutils literal notranslate"><span class="pre">Game</span></code></a> that
manages the sequence of actions that define the game of Blackjack.</p>
<p>Note that a single cycle of play is one complete Blackjack game from the
initial ante to the final resolution of all bets. Shuffling is implied
before the first game and performed as needed.</p>
</dd></dl>

<div class="section" id="id3">
<h3>Fields<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="BlackjackGame.shoe">
<code class="sig-prename descclassname">BlackjackGame.</code><code class="sig-name descname">shoe</code><a class="headerlink" href="#BlackjackGame.shoe" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the dealer’s <a class="reference internal" href="card_deck_shoe.html#Shoe" title="Shoe"><code class="xref py py-class docutils literal notranslate"><span class="pre">Shoe</span></code></a> with the available pool of cards.</p>
</dd></dl>

<dl class="attribute">
<dt id="BlackjackGame.dealer">
<code class="sig-prename descclassname">BlackjackGame.</code><code class="sig-name descname">dealer</code><a class="headerlink" href="#BlackjackGame.dealer" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the dealer’s <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>.</p>
</dd></dl>

</div>
<div class="section" id="id4">
<h3>Constructors<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="BlackjackGame.__init__">
<code class="sig-prename descclassname">BlackjackGame.</code><code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">shoe: Shoe</em>, <em class="sig-param">table: BlackjackTable</em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#BlackjackGame.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shoe</strong> (<a class="reference internal" href="card_deck_shoe.html#Shoe" title="Shoe"><code class="xref py py-class docutils literal notranslate"><span class="pre">Shoe</span></code></a>) – The dealer’s shoe, populated with the proper number of decks</p></li>
<li><p><strong>table</strong> (<a class="reference internal" href="blackjack_table.html#BlackjackTable" title="BlackjackTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackTable</span></code></a>) – The table on which bets are placed</p></li>
</ul>
</dd>
</dl>
<p>Constructs a new <a class="reference internal" href="#BlackjackGame" title="BlackjackGame"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackGame</span></code></a>, using a given <a class="reference internal" href="card_deck_shoe.html#Shoe" title="Shoe"><code class="xref py py-class docutils literal notranslate"><span class="pre">Shoe</span></code></a>
for dealing <a class="reference internal" href="card_deck_shoe.html#Card" title="Card"><code class="xref py py-class docutils literal notranslate"><span class="pre">Card</span></code></a> instances and a <a class="reference internal" href="blackjack_table.html#BlackjackTable" title="BlackjackTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackTable</span></code></a>
for recording <a class="reference internal" href="../roulette/bet.html#Bet" title="Bet"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bet</span></code></a> instances that are associated with specific <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances.</p>
</dd></dl>

</div>
<div class="section" id="id5">
<h3>Methods<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="BlackjackGame.cycle">
<code class="sig-prename descclassname">BlackjackGame.</code><code class="sig-name descname">cycle</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#BlackjackGame.cycle" title="Permalink to this definition">¶</a></dt>
<dd><p>A single game of Blackjack. This steps through the following sequence
of operations.</p>
<ol class="arabic">
<li><p>Call <a class="reference internal" href="#BlackjackPlayer.newGame" title="BlackjackPlayer.newGame"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BlackjackPlayer.newGame()</span></code></a> to reset the player. Call <a class="reference internal" href="#BlackjackPlayer.getFirstHand" title="BlackjackPlayer.getFirstHand"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BlackjackPlayer.getFirstHand()</span></code></a>
to get the initial, empty <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>.  Call <a class="reference internal" href="hand.html#Hand.add" title="Hand.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Hand.add()</span></code></a> to
deal two cards into the player’s initial hand.</p></li>
<li><p>Reset the dealer’s hand and deal two cards.</p></li>
<li><p>Call <code class="xref py py-meth docutils literal notranslate"><span class="pre">BlackjackGame.hand.getUpCard()</span></code> to get the dealer’s up card. If
this card returns <code class="docutils literal notranslate"><span class="pre">True</span></code> for the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Card.offerInsurance()</span></code>,
then use the <a class="reference internal" href="#BlackjackGame.insurance" title="BlackjackGame.insurance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">insurance()</span></code></a> method.</p>
<p>Only an instance fo the subclass <a class="reference internal" href="card_deck_shoe.html#AceCard" title="AceCard"><code class="xref py py-class docutils literal notranslate"><span class="pre">AceCard</span></code></a> will return true for
<code class="xref py py-meth docutils literal notranslate"><span class="pre">offerInstance()</span></code>.  All other <a class="reference internal" href="card_deck_shoe.html#Card" title="Card"><code class="xref py py-class docutils literal notranslate"><span class="pre">Card</span></code></a> classes will return false.</p>
</li>
<li><p>Iterate through all <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances, assuring that no hand
it splittable, or split has been declined for all hands. If a
hand is splittable and split has not previously been declined, call the <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>’s
<code class="xref py py-meth docutils literal notranslate"><span class="pre">split()</span></code> method.</p>
<p>If the <code class="xref py py-meth docutils literal notranslate"><span class="pre">split()</span></code> method returns a new hand, deal an additional Card to the
original hand and the new split hand.</p>
</li>
<li><p>Iterate through all <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> instances calling the <a class="reference internal" href="#BlackjackGame.fillHand" title="BlackjackGame.fillHand"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fillHand()</span></code></a>
method to check for blackjack, deal cards and check for a bust.
This loop will finish with the hand either busted or standing pat.</p></li>
<li><p>While the dealer’s hand value is 16 or less, deal another card.
This loop will finish with the dealer either busted or standing pat.</p></li>
<li><p>If the dealer’s hand value is bust, resolve all ante bets as
winners. The <code class="xref py py-class docutils literal notranslate"><span class="pre">OutcomeAnte</span></code> should be able to do this
evaluation for a given <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> compared against the
dealer’s bust.</p></li>
<li><p>Iterate through all hands with unresolved bets, and compare the
hand total against the dealer’s total. The <code class="xref py py-class docutils literal notranslate"><span class="pre">OutcomeAnte</span></code>
should be able to handle comparing the player’s hand and
dealer’s total to determine the correct odds.</p></li>
</ol>
<p>Note that there can be some variations to the steps in this cycle. A single, very long
method body is a bad design. One of the key places where new functionality
can be inserted is the final step determining of winning hands after the player and dealer’s
hands have been filled and neither player has gone bust.</p>
</dd></dl>

<dl class="method">
<dt id="BlackjackGame.insurance">
<code class="sig-prename descclassname">BlackjackGame.</code><code class="sig-name descname">insurance</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#BlackjackGame.insurance" title="Permalink to this definition">¶</a></dt>
<dd><p>Offers even money or insurance for a single game of blackjack. This
steps through the following sequence of operations.</p>
<ol class="arabic">
<li><p>Get the player’s <a class="reference internal" href="#BlackjackPlayer.getFirstHand" title="BlackjackPlayer.getFirstHand"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BlackjackPlayer.getFirstHand()</span></code></a>. Is it blackjack?</p>
<p>If the player holds blackjack, then call <a class="reference internal" href="#BlackjackPlayer.evenMoney" title="BlackjackPlayer.evenMoney"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BlackjackPlayer.evenMoney()</span></code></a>.</p>
<p>If the even money offer is accepted, then
move the ante bet to even money at 1:1. Resolve the bet as a
winner. The bet will be removed, and the game will be over.</p>
</li>
<li><p>Call <a class="reference internal" href="#BlackjackPlayer.insurance" title="BlackjackPlayer.insurance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BlackjackPlayer.insurance()</span></code></a>. If insurance declined, this
method is done.</p></li>
<li><p>If insurance was accepted by the player, then check the dealer’s hand.  Is it blackjack?</p>
<p>If the dealer hold blackjack, the insurance bet is resolved as a winner,
and the ante is a loser; the bets are removed and the game will
be over.</p>
<p>If the dealer does not have blackjack, the insurance bet
is resolved as a loser, and the ante remains.</p>
<p>If insurance was declined by the player, nothing is done.</p>
</li>
</ol>
</dd></dl>

<dl class="method">
<dt id="BlackjackGame.fillHand">
<code class="sig-prename descclassname">BlackjackGame.</code><code class="sig-name descname">fillHand</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">hand: Hand</em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#BlackjackGame.fillHand" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hand</strong> (<a class="reference internal" href="hand.html#Hand" title="Hand"><em>Hand</em></a>) – the hand which is being filled</p>
</dd>
</dl>
<p>Fills one of
the player’s hands in a single game of Blackjack. This steps through
the following sequence of operations.</p>
<ol class="arabic">
<li><p>While points are less than 21, call <a class="reference internal" href="#BlackjackPlayer.doubleDown" title="BlackjackPlayer.doubleDown"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BlackjackPlayer.doubleDown()</span></code></a> to
offer doubling down. If accepted, deal one card, filling is
done.</p>
<p>If double down is declined, call <a class="reference internal" href="#BlackjackPlayer.hit" title="BlackjackPlayer.hit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BlackjackPlayer.hit()</span></code></a> to
offer a hit. If accepted, deal one card. If both double down and
hit are declined, filling is done, the player is standing pat.</p>
</li>
<li><p>If the points are over 21, the hand is bust, and is immediately resolved as
a loser.  The game is over.</p></li>
</ol>
</dd></dl>

<dl class="method">
<dt id="BlackjackGame.__str__">
<code class="sig-prename descclassname">BlackjackGame.</code><code class="sig-name descname">__str__</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#BlackjackGame.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays the current state of the game, including the player, and
the various hands.</p>
</dd></dl>

</div>
</div>
<div class="section" id="blackjack-game-deliverables">
<h2>Blackjack Game Deliverables<a class="headerlink" href="#blackjack-game-deliverables" title="Permalink to this headline">¶</a></h2>
<p>There are eight deliverables for this exercise.</p>
<ul class="simple">
<li><p>The stub <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a> class.</p></li>
<li><p>A class which performs a unit test of the <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a>
class. Since this player will mimic the dealer, hitting a 16 and
standing on a 17, the unit test can provide a variety of <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>
s and confirm which offers are accepted and rejected.</p></li>
<li><p>The revised <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> class.</p></li>
<li><p>A class which performs a unit tests of the <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a> class.
The unit test should create several instances of <a class="reference internal" href="card_deck_shoe.html#Card" title="Card"><code class="xref py py-class docutils literal notranslate"><span class="pre">Card</span></code></a>, <a class="reference internal" href="card_deck_shoe.html#FaceCard" title="FaceCard"><code class="xref py py-class docutils literal notranslate"><span class="pre">FaceCard</span></code></a>
and <a class="reference internal" href="card_deck_shoe.html#AceCard" title="AceCard"><code class="xref py py-class docutils literal notranslate"><span class="pre">AceCard</span></code></a>, and add these to instances of <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>,
to create various point totals. Since this version of <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>
interacts with a <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a>, additional offers of
split, double, and hit can be made to the <a class="reference internal" href="hand.html#Hand" title="Hand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hand</span></code></a>.</p></li>
<li><p>The revised <a class="reference internal" href="card_deck_shoe.html#Card" title="Card"><code class="xref py py-class docutils literal notranslate"><span class="pre">Card</span></code></a> class.</p></li>
<li><p>Revised unit tests to exercise the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Card.offerInsurance()</span></code> method.</p></li>
<li><p>The revised <a class="reference internal" href="#BlackjackGame" title="BlackjackGame"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackGame</span></code></a> class.</p></li>
<li><p>A class which performs a unit tests of the <a class="reference internal" href="#BlackjackGame" title="BlackjackGame"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackGame</span></code></a>
class. The unit test will have to create a <a class="reference internal" href="card_deck_shoe.html#Shoe" title="Shoe"><code class="xref py py-class docutils literal notranslate"><span class="pre">Shoe</span></code></a> instance that
produces cards in a known sequence, as well as <a class="reference internal" href="#BlackjackPlayer" title="BlackjackPlayer"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlackjackPlayer</span></code></a>.
The <code class="xref py py-meth docutils literal notranslate"><span class="pre">cycle()</span></code> method, as described in the design, is too
complex for unit testing, and needs to be decomposed into a number
of simpler procedures.</p></li>
</ul>
</div>
<div class="section" id="looking-forward">
<h2>Looking Forward<a class="headerlink" href="#looking-forward" title="Permalink to this headline">¶</a></h2>
<p>We have all of the components in place to start looking at player strategies.
The player has a number of decisions during the game, plus a betting strategy
decision based on the outcome of each game. We’ll set the betting aside
for a moment and focus on the Blackjack rules. In the next chapter, we’ll
build a simple player that is able to work with the game and table.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/cover_art.png" alt="Logo"/>
    
    <h1 class="logo logo-name">Building Skills in Object-Oriented Design</h1>
    
  </a>
</p>









  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Blackjack Game Class</a><ul>
<li><a class="reference internal" href="#blackjack-game-analysis">Blackjack Game Analysis</a></li>
<li><a class="reference internal" href="#blackjack-collaboration">Blackjack Collaboration</a><ul>
<li><a class="reference internal" href="#insurance-collaboration">Insurance Collaboration</a></li>
<li><a class="reference internal" href="#filling-the-hands">Filling the Hands</a></li>
<li><a class="reference internal" href="#hand-specific-decisions">Hand-Specific Decisions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dealer-rules">Dealer Rules</a></li>
<li><a class="reference internal" href="#blackjackplayer-class">BlackjackPlayer Class</a><ul>
<li><a class="reference internal" href="#fields">Fields</a></li>
<li><a class="reference internal" href="#constructors">Constructors</a></li>
<li><a class="reference internal" href="#methods">Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#card-rework">Card Rework</a></li>
<li><a class="reference internal" href="#hand-rework">Hand Rework</a><ul>
<li><a class="reference internal" href="#id1">Fields</a></li>
<li><a class="reference internal" href="#id2">Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#blackjackgame-class">BlackjackGame Class</a><ul>
<li><a class="reference internal" href="#id3">Fields</a></li>
<li><a class="reference internal" href="#id4">Constructors</a></li>
<li><a class="reference internal" href="#id5">Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#blackjack-game-deliverables">Blackjack Game Deliverables</a></li>
<li><a class="reference internal" href="#looking-forward">Looking Forward</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="blackjack_table.html" title="previous chapter">Blackjack Table Class</a></li>
      <li>Next: <a href="simple_blackjack_player.html" title="next chapter">Simple Blackjack Player Class</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Steven F. Lott.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>